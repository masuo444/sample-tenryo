<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>天領酒造 - 飛騨の地酒 創業1680年</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #2c1810;
            --color-secondary: #3d2817;
            --color-accent: #d4af37;
            --color-accent-light: #f4d03f;
            --color-accent-dark: #b8941f;
            --color-text: #ffffff;
            --color-text-muted: #f8f9fa;
            --color-text-dark: #2c1810;
            --color-surface: rgba(61, 40, 23, 0.95);
            --color-overlay: rgba(0, 0, 0, 0.7);
        }

        body {
            font-family: 'Hiragino Mincho ProN', 'Yu Mincho', 'Noto Serif JP', serif;
            background: linear-gradient(135deg, var(--color-primary) 0%, #1f0e08 100%);
            color: var(--color-text);
            overflow-x: hidden;
        }

        /* ヘッダー */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--color-surface);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--color-accent);
            padding: 1rem 2rem;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-mark {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-primary);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        .logo-text h1 {
            font-size: 1.5rem;
            color: var(--color-accent);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .logo-text p {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            opacity: 0.9;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
        }

        nav a {
            color: var(--color-text-muted);
            text-decoration: none;
            transition: all 0.3s;
            font-weight: 500;
        }

        nav a:hover {
            color: var(--color-accent);
            transform: translateY(-2px);
        }

        /* ヒーローセクション */
        .hero {
            margin-top: 80px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: radial-gradient(ellipse at center, rgba(212, 175, 55, 0.05) 0%, transparent 70%);
        }

        .hero-content {
            text-align: center;
            padding: 2rem;
            max-width: 900px;
        }

        .hero h2 {
            font-size: 4rem;
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            text-shadow: 0 5px 20px rgba(212, 175, 55, 0.3);
        }

        .hero .subtitle {
            font-size: 1.5rem;
            color: var(--color-text-muted);
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .hero-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: var(--color-surface);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--color-accent-dark);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2);
            border-color: var(--color-accent);
        }

        .feature-card h3 {
            color: var(--color-accent);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .feature-card p {
            color: var(--color-text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* クラバトラー紹介セクション */
        .kurabatler-intro {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid var(--color-accent);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 3rem;
            display: flex;
            align-items: center;
            gap: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .kurabatler-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid var(--color-accent);
            object-fit: cover;
            flex-shrink: 0;
        }

        .kurabatler-text h3 {
            color: var(--color-accent);
            font-size: 1.4rem;
            margin-bottom: 0.8rem;
        }

        .kurabatler-text p {
            color: var(--color-text-muted);
            line-height: 1.6;
            font-size: 1rem;
        }

        /* セクション共通 */
        section {
            padding: 5rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
            color: var(--color-accent);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--color-accent), transparent);
        }

        /* 歴史セクション */
        .history {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 3rem;
            margin: 3rem auto;
        }

        .timeline {
            position: relative;
            padding-left: 50px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--color-accent-dark);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -35px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--color-accent);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .timeline-item h3 {
            color: var(--color-accent);
            margin-bottom: 0.5rem;
        }

        /* 銘柄ギャラリー */
        .products {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .product-card {
            background: var(--color-surface);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s;
            border: 2px solid var(--color-accent-dark);
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.3);
            border-color: var(--color-accent);
        }

        .product-image {
            height: 200px;
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--color-accent);
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-info h3 {
            color: var(--color-accent);
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        .product-info .category {
            color: var(--color-accent-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .product-info p {
            color: var(--color-text-muted);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .product-specs {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(212, 175, 55, 0.3);
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .spec-label {
            color: var(--color-accent-dark);
        }

        .spec-value {
            color: var(--color-text-muted);
        }

        /* チャットボット */
        .chatbot-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
            transition: all 0.3s;
            z-index: 999;
        }

        .chatbot-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(212, 175, 55, 0.6);
        }

        .chatbot-button svg {
            width: 30px;
            height: 30px;
            fill: var(--color-primary);
        }

        /* GPT APIステータスボタン */
        .api-status-button {
            position: fixed;
            bottom: 30px;
            right: 110px;
            width: 80px;
            height: 40px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #e1e5e9;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            z-index: 998;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .api-status-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        /* ステータス色 */
        .api-status-button.checking .status-indicator {
            background: #ffa500;
            animation: pulse 1.5s infinite;
        }

        .api-status-button.online .status-indicator {
            background: #22c55e;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.4);
        }

        .api-status-button.offline .status-indicator {
            background: #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.4);
        }

        .api-status-button.checking {
            border-color: #ffa500;
            color: #f59e0b;
        }

        .api-status-button.online {
            border-color: #22c55e;
            color: #16a34a;
        }

        .api-status-button.offline {
            border-color: #ef4444;
            color: #dc2626;
        }

        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }

        .chatbot-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 380px;
            height: 600px;
            background: var(--color-surface);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 2px solid var(--color-accent);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            display: none;
            flex-direction: column;
            z-index: 998;
            overflow: hidden;
        }

        .chatbot-container.active {
            display: flex;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
            padding: 1.5rem;
            color: var(--color-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h3 {
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: var(--color-primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chatbot-close:hover {
            transform: rotate(90deg);
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 0.8rem 1.2rem;
            border-radius: 15px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
            color: var(--color-primary);
        }

        .message.bot {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
            color: var(--color-text);
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            padding: 0.8rem 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-accent);
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .chatbot-input {
            padding: 1rem;
            border-top: 1px solid rgba(212, 175, 55, 0.3);
            display: flex;
            gap: 0.5rem;
        }

        .chatbot-input input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: var(--color-text);
            padding: 0.8rem;
            border-radius: 25px;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s;
        }

        .chatbot-input input:focus {
            border-color: var(--color-accent);
            background: rgba(255, 255, 255, 0.15);
        }

        .chatbot-input input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .input-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .voice-btn, .send-btn {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .voice-btn:hover, .send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        .voice-btn svg, .send-btn svg {
            width: 20px;
            height: 20px;
            fill: var(--color-primary);
        }

        .voice-btn.recording {
            animation: pulse 1s infinite;
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(229, 62, 62, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(229, 62, 62, 0); }
            100% { box-shadow: 0 0 0 0 rgba(229, 62, 62, 0); }
        }

        .quick-replies {
            padding: 0.5rem 1rem;
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            border-top: 1px solid rgba(212, 175, 55, 0.2);
        }

        .quick-reply {
            padding: 0.5rem 1rem;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid var(--color-accent-dark);
            border-radius: 20px;
            color: var(--color-accent);
            font-size: 0.85rem;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-reply:hover {
            background: var(--color-accent);
            color: var(--color-primary);
        }

        /* 商品詳細モーダル */
        .product-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 2rem;
        }

        .product-modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--color-surface);
            backdrop-filter: blur(15px);
            border: 2px solid var(--color-accent);
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
            color: var(--color-primary);
            padding: 2rem;
            text-align: center;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--color-primary);
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.2);
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .modal-category {
            font-size: 1rem;
            opacity: 0.9;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-section {
            margin-bottom: 2rem;
        }

        .modal-section h4 {
            color: var(--color-accent);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 0.5rem;
        }

        .modal-description {
            color: var(--color-text-muted);
            line-height: 1.8;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }

        .modal-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .modal-spec-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            text-align: center;
        }

        .modal-spec-label {
            color: var(--color-accent-dark);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .modal-spec-value {
            color: var(--color-text);
            font-size: 1.2rem;
            font-weight: bold;
        }

        .modal-tasting-notes {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid var(--color-accent-dark);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .modal-tasting-notes h5 {
            color: var(--color-accent);
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }

        .tasting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .tasting-item {
            text-align: center;
        }

        .tasting-item .label {
            color: var(--color-accent-dark);
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }

        .tasting-item .value {
            color: var(--color-text-muted);
            font-size: 1rem;
        }

        .award-badge {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: var(--color-primary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-block;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }

        /* レスポンシブ対応 */
        @media (max-width: 768px) {
            .modal-content {
                margin: 1rem;
                max-height: 90vh;
            }

            .modal-header {
                padding: 1.5rem;
            }

            .modal-title {
                font-size: 1.5rem;
            }

            .modal-body {
                padding: 1.5rem;
            }

            .modal-specs {
                grid-template-columns: 1fr;
            }

            .tasting-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* フッター */
        footer {
            background: var(--color-surface);
            border-top: 2px solid var(--color-accent);
            padding: 3rem 2rem 2rem;
            text-align: center;
            margin-top: 5rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
            text-align: left;
        }

        .footer-section h4 {
            color: var(--color-accent);
            margin-bottom: 1rem;
        }

        .footer-section p, .footer-section a {
            color: var(--color-text-muted);
            text-decoration: none;
            line-height: 1.8;
            font-size: 0.9rem;
        }

        .footer-section a:hover {
            color: var(--color-accent);
        }

        .copyright {
            padding-top: 2rem;
            border-top: 1px solid rgba(212, 175, 55, 0.3);
            color: var(--color-text-muted);
            opacity: 0.7;
        }

        /* レスポンシブ */
        @media (max-width: 768px) {
            nav ul {
                display: none;
            }

            .hero h2 {
                font-size: 2.5rem;
            }

            .chatbot-container {
                width: 90%;
                right: 5%;
                left: 5%;
                height: 70vh;
            }

            .products {
                grid-template-columns: 1fr;
            }

            .kurabatler-intro {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem;
                gap: 1.5rem;
            }

            .kurabatler-image {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- ヘッダー -->
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-mark">天</div>
                <div class="logo-text">
                    <h1>天領酒造</h1>
                    <p>創業1680年 飛騨の地酒</p>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="#about">酒造について</a></li>
                    <li><a href="#products">銘柄一覧</a></li>
                    <li><a href="#history">歴史と伝統</a></li>
                    <li><a href="#contact">お問い合わせ</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ヒーローセクション -->
    <section class="hero">
        <div class="hero-content">
            <h2>飛騨の恵みが醸す至高の一滴</h2>
            <p class="subtitle">340年以上の歴史を持つ天領酒造<br>飛騨山脈の伏流水と100%酒造好適米で醸す極上の日本酒</p>
            
            <div class="hero-features">
                <div class="feature-card">
                    <h3>🏔️ 飛騨の天然水</h3>
                    <p>地下30mから汲み上げる飛騨山脈の超軟水を使用</p>
                </div>
                <div class="feature-card">
                    <h3>🌾 100%酒造好適米</h3>
                    <p>全商品に酒造好適米を100%使用。県内使用率No.1</p>
                </div>
                <div class="feature-card">
                    <h3>🏆 数々の受賞歴</h3>
                    <p>全国新酒鑑評会で多数受賞。JAL国際線採用実績</p>
                </div>
                <div class="feature-card">
                    <h3>🎌 伝統の技</h3>
                    <p>8代目当主が守る340年の伝統と革新の融合</p>
                </div>
            </div>
            
            <div class="kurabatler-intro">
                <img src="クラバトラーキャラ.png" alt="クラバトラー" class="kurabatler-image">
                <div class="kurabatler-text">
                    <h3>クラバトラーがご案内</h3>
                    <p>AI酒蔵ガイド「クラバトラー」が、天領酒造の歴史と魅力をご案内いたします。日本酒についてお気軽にお尋ねください。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 歴史セクション -->
    <section id="history" class="history">
        <h2 class="section-title">天領酒造の歴史</h2>
        <div class="timeline">
            <div class="timeline-item">
                <h3>1680年（延宝8年）</h3>
                <p>近江国日野から飛騨国に移り住んだ日野屋佐兵衛が創業。飛騨の人情と自然に魅了され、萩原の地に酒造りを始める。</p>
            </div>
            <div class="timeline-item">
                <h3>1956年（昭和31年）</h3>
                <p>天領酒造株式会社として法人化。伝統を守りながら近代化への一歩を踏み出す。</p>
            </div>
            <div class="timeline-item">
                <h3>2005年〜2009年</h3>
                <p>JAL国際線ビジネスクラスで「純米大吟醸天領」が採用。世界の空で日本の味を届ける。</p>
            </div>
            <div class="timeline-item">
                <h3>2010年〜2011年</h3>
                <p>パリ国際航空ショー、ファーンボロー国際航空ショーでVIP向け贈答品に選定。</p>
            </div>
            <div class="timeline-item">
                <h3>現在</h3>
                <p>8代目当主のもと、100%酒造好適米使用と自社精米にこだわり、最高品質の日本酒を醸造。</p>
            </div>
        </div>
    </section>

    <!-- 銘柄セクション -->
    <section id="products">
        <h2 class="section-title">代表銘柄</h2>
        <div class="products">
            <div class="product-card" data-product="junmai-daiginjo" onclick="openProductModal('junmai-daiginjo')">
                <div class="product-image">🍶</div>
                <div class="product-info">
                    <h3>純米大吟醸 ひだほまれ天領</h3>
                    <p class="category">JUNMAI DAIGINJO</p>
                    <p>岐阜県産「ひだほまれ」を45%まで磨き上げた最高峰。華やかな香りとまろやかな味わいが特徴。</p>
                    <div class="product-specs">
                        <div class="spec-item">
                            <span class="spec-label">精米歩合</span>
                            <span class="spec-value">45%</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">アルコール度</span>
                            <span class="spec-value">15度</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">使用米</span>
                            <span class="spec-value">ひだほまれ</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="product-card" data-product="daiginjo" onclick="openProductModal('daiginjo')">
                <div class="product-image">🏆</div>
                <div class="product-info">
                    <h3>大吟醸 吟</h3>
                    <p class="category">DAIGINJO</p>
                    <p>山田錦を贅沢に使用した大吟醸。フルーティーな吟醸香と繊細な味わいのバランスが絶妙。</p>
                    <div class="product-specs">
                        <div class="spec-item">
                            <span class="spec-label">精米歩合</span>
                            <span class="spec-value">40%</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">アルコール度</span>
                            <span class="spec-value">16度</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">使用米</span>
                            <span class="spec-value">山田錦</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="product-card" data-product="tokubetsu-junmai" onclick="openProductModal('tokubetsu-junmai')">
                <div class="product-image">✨</div>
                <div class="product-info">
                    <h3>特別純米酒 飛切り</h3>
                    <p class="category">TOKUBETSU JUNMAI</p>
                    <p>食中酒として最適な純米酒。すっきりとした飲み口で、どんな料理にも合う万能選手。</p>
                    <div class="product-specs">
                        <div class="spec-item">
                            <span class="spec-label">精米歩合</span>
                            <span class="spec-value">60%</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">アルコール度</span>
                            <span class="spec-value">15度</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">味わい</span>
                            <span class="spec-value">中口</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="product-card" data-product="junmai-ginjo" onclick="openProductModal('junmai-ginjo')">
                <div class="product-image">🌸</div>
                <div class="product-info">
                    <h3>純米吟醸 ひだほまれ</h3>
                    <p class="category">JUNMAI GINJO</p>
                    <p>地元産ひだほまれを55%精米。穏やかな香りとお米の旨みが調和した逸品。</p>
                    <div class="product-specs">
                        <div class="spec-item">
                            <span class="spec-label">精米歩合</span>
                            <span class="spec-value">55%</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">アルコール度</span>
                            <span class="spec-value">15度</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">使用米</span>
                            <span class="spec-value">ひだほまれ</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="product-card" data-product="junmai" onclick="openProductModal('junmai')">
                <div class="product-image">🏔️</div>
                <div class="product-info">
                    <h3>純米酒 天領</h3>
                    <p class="category">JUNMAI-SHU</p>
                    <p>天領酒造の定番純米酒。米の旨みをしっかりと感じられる、飽きの来ない味わい。</p>
                    <div class="product-specs">
                        <div class="spec-item">
                            <span class="spec-label">精米歩合</span>
                            <span class="spec-value">65%</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">アルコール度</span>
                            <span class="spec-value">15度</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">味わい</span>
                            <span class="spec-value">やや辛口</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="product-card" data-product="seasonal" onclick="openProductModal('seasonal')">
                <div class="product-image">❄️</div>
                <div class="product-info">
                    <h3>四季の酒 純米大吟醸</h3>
                    <p class="category">SEASONAL LIMITED</p>
                    <p>季節限定の純米大吟醸。低温貯蔵でフレッシュな味わいを保つ、特別な一本。</p>
                    <div class="product-specs">
                        <div class="spec-item">
                            <span class="spec-label">精米歩合</span>
                            <span class="spec-value">50%</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">アルコール度</span>
                            <span class="spec-value">15度</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">保存方法</span>
                            <span class="spec-value">要冷蔵</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- フッター -->
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-info">
                <div class="footer-section">
                    <h4>天領酒造株式会社</h4>
                    <p>〒509-2517<br>
                    岐阜県下呂市萩原町萩原1289-1<br>
                    TEL: 0576-52-1515<br>
                    FAX: 0576-52-3636</p>
                </div>
                <div class="footer-section">
                    <h4>営業時間</h4>
                    <p>平日: 8:30 - 17:00<br>
                    土曜: 8:30 - 12:00<br>
                    日祝: 定休日<br>
                    ※酒蔵見学は要予約</p>
                </div>
                <div class="footer-section">
                    <h4>リンク</h4>
                    <p><a href="#">オンラインショップ</a><br>
                    <a href="#">酒蔵見学予約</a><br>
                    <a href="#">取扱店舗一覧</a><br>
                    <a href="#">お問い合わせ</a></p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 天領酒造株式会社 All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- GPT APIステータス -->
    <div class="api-status-button" id="apiStatusButton" onclick="checkApiStatus()">
        <div class="status-indicator" id="statusIndicator"></div>
        <span class="status-text" id="statusText">API</span>
    </div>

    <!-- チャットボット -->
    <div class="chatbot-button" onclick="toggleChatbot()">
        <svg viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
        </svg>
    </div>

    <div class="chatbot-container" id="chatbot">
        <div class="chatbot-header">
            <h3>
                <span>🍶</span>
                天領酒造AIアシスタント
            </h3>
            <button class="chatbot-close" onclick="toggleChatbot()">×</button>
        </div>
        
        <div class="chatbot-messages" id="chatMessages">
            <div class="message bot">
                こんにちは！天領酒造へようこそ。<br>
                340年の歴史を持つ当蔵について、何でもお尋ねください。<br><br>
                銘柄のご相談、酒蔵見学、歴史について等、お気軽にどうぞ！
            </div>
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
        </div>
        
        <div class="quick-replies">
            <button class="quick-reply" onclick="sendQuickReply('おすすめの銘柄は？')">おすすめの銘柄</button>
            <button class="quick-reply" onclick="sendQuickReply('純米大吟醸について')">純米大吟醸</button>
            <button class="quick-reply" onclick="sendQuickReply('酒蔵見学について')">酒蔵見学</button>
            <button class="quick-reply" onclick="sendQuickReply('歴史を教えて')">歴史</button>
        </div>
        
        <div class="chatbot-input">
            <input type="text" id="chatInput" placeholder="メッセージを入力..." onkeypress="handleKeyPress(event)">
            <div class="input-buttons">
                <button class="voice-btn" id="voiceBtn" onclick="toggleVoiceInput()">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"/>
                    </svg>
                </button>
                <button class="send-btn" onclick="sendMessage()">
                    <svg viewBox="0 0 24 24">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- 商品詳細モーダル -->
    <div class="product-modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" onclick="closeProductModal()">×</button>
                <h2 class="modal-title" id="modalTitle"></h2>
                <p class="modal-category" id="modalCategory"></p>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4>🍶 商品概要</h4>
                    <p class="modal-description" id="modalDescription"></p>
                    <div id="modalAwards"></div>
                </div>
                
                <div class="modal-section">
                    <h4>📊 詳細スペック</h4>
                    <div class="modal-specs" id="modalSpecs"></div>
                </div>
                
                <div class="modal-section">
                    <h4>🎯 テイスティングノート</h4>
                    <div class="modal-tasting-notes">
                        <h5>味わいの特徴</h5>
                        <div class="tasting-grid" id="tastingGrid"></div>
                    </div>
                </div>
                
                <div class="modal-section">
                    <h4>🍽️ おすすめペアリング</h4>
                    <p id="modalPairing"></p>
                </div>
                
                <div class="modal-section">
                    <h4>🌡️ 最適温度</h4>
                    <p id="modalTemperature"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- GPT API連携用スクリプトを追加 -->
    <script src="chatbot-client.js"></script>
    
    <script>
        // チャットボット初期化（GPT API対応）
        let chatbot = null;
        
        // ページ読み込み時に初期化
        document.addEventListener('DOMContentLoaded', function() {
            // GPT API設定（環境に応じて変更）
            chatbot = new TenryoChatbot({
                apiEndpoint: '/.netlify/functions/chat', // Netlify Functions endpoint
                useGPT: true, // GPT APIを使用（falseにするとローカル応答のみ）
                fallbackToLocal: true // API失敗時はローカル応答にフォールバック
            });
            
            // APIの状態を確認（オプション）
            checkApiStatus();
        });
        
        // API状態確認（ボタン付き）
        async function checkApiStatus() {
            const button = document.getElementById('apiStatusButton');
            const indicator = document.getElementById('statusIndicator');
            const text = document.getElementById('statusText');
            
            // チェック中状態
            button.className = 'api-status-button checking';
            text.textContent = 'チェック中';
            
            try {
                const response = await fetch('/.netlify/functions/health');
                const data = await response.json();
                
                if (response.ok && data.status === 'ok' && data.openai_configured) {
                    // オンライン状態
                    button.className = 'api-status-button online';
                    text.textContent = 'オンライン';
                    console.log('✅ GPT API サーバーに接続されています');
                    if (chatbot) chatbot.useGPT = true;
                } else {
                    // APIキー未設定またはエラー
                    button.className = 'api-status-button offline';
                    text.textContent = 'オフライン';
                    console.log('⚠️ OpenAI APIキーが設定されていません');
                    if (chatbot) chatbot.useGPT = false;
                }
            } catch (error) {
                // 接続エラー
                button.className = 'api-status-button offline';
                text.textContent = 'オフライン';
                console.log('⚠️ GPT APIサーバーに接続できません:', error);
                if (chatbot) chatbot.useGPT = false;
            }
        }

        // 商品詳細データ
        const productDetails = {
            'junmai-daiginjo': {
                title: '純米大吟醸 ひだほまれ天領',
                category: 'JUNMAI DAIGINJO',
                description: '岐阜県産「ひだほまれ」を45%まで磨き上げた天領酒造の最高峰。華やかで上品な吟醸香と、絹のようにまろやかな味わいが特徴です。口に含むと広がる果実様の香りと、後味の清々しさが絶妙なバランスを保っています。',
                awards: ['JAL国際線ビジネスクラス採用（2005-2009年）', '全国新酒鑑評会 優秀賞受賞'],
                specs: {
                    '精米歩合': '45%',
                    'アルコール度数': '15度',
                    '日本酒度': '+3',
                    '酸度': '1.3',
                    '使用米': 'ひだほまれ（岐阜県産）',
                    '使用酵母': '9号酵母',
                    '製造方法': '袋吊り・斗瓶取り'
                },
                tasting: {
                    '香り': 'メロン、白桃',
                    '味わい': 'やや辛口',
                    'ボディ': 'ミディアム',
                    '余韻': '長い'
                },
                pairing: '白身魚の刺身、蒸し鮑、湯波料理、塩焼き鮎、薄味の煮物。繊細な味わいの和食全般に最適です。',
                temperature: '冷やして（8-12℃）がおすすめ。華やかな香りと上品な味わいを最も楽しめる温度帯です。'
            },
            'daiginjo': {
                title: '大吟醸 吟',
                category: 'DAIGINJO',
                description: '酒米の王様「山田錦」を40%まで磨いた贅沢な大吟醸。フルーティーな吟醸香と繊細で上品な味わいのバランスが絶妙です。低温でじっくりと発酵させることで生まれる、透明感のある美しい酒質が自慢です。',
                awards: ['JAL国内線ファーストクラス採用（2011-2012年）', 'ファーンボロー国際航空ショー VIP贈答品'],
                specs: {
                    '精米歩合': '40%',
                    'アルコール度数': '16度',
                    '日本酒度': '+4',
                    '酸度': '1.2',
                    '使用米': '山田錦（特A地区）',
                    '使用酵母': '協会1801号',
                    '製造方法': '袋吊り'
                },
                tasting: {
                    '香り': 'リンゴ、洋梨',
                    '味わい': '辛口',
                    'ボディ': 'ライト',
                    '余韻': '上品で長い'
                },
                pairing: 'ふぐ刺し、車海老、雲丹、穴子の白焼き。高級食材との組み合わせで真価を発揮します。',
                temperature: '冷やして（6-10℃）。繊細な香りと味わいを損なわない低温がベストです。'
            },
            'tokubetsu-junmai': {
                title: '特別純米酒 飛切り',
                category: 'TOKUBETSU JUNMAI',
                description: '食中酒として最適な純米酒。60%精米による米の旨みとすっきりとした飲み口のバランスが絶妙で、どんな料理にも寄り添う万能選手です。毎日の食卓を豊かに彩る、飽きの来ない味わいが魅力です。',
                awards: ['地元飲食店での定番酒', '食中酒コンテスト入賞'],
                specs: {
                    '精米歩合': '60%',
                    'アルコール度数': '15度',
                    '日本酒度': '+2',
                    '酸度': '1.5',
                    '使用米': 'ひだほまれ',
                    '使用酵母': '9号酵母',
                    '製造方法': 'もろみ濾過'
                },
                tasting: {
                    '香り': '穏やか、米様',
                    '味わい': '中口',
                    'ボディ': 'ミディアム',
                    '余韻': '程よい'
                },
                pairing: '焼き鳥、煮物、天ぷら、鍋料理、焼き魚。幅広い和食に合う万能酒です。',
                temperature: '冷やから燗まで（10-45℃）。温度帯により異なる表情を楽しめます。'
            },
            'junmai-ginjo': {
                title: '純米吟醸 ひだほまれ',
                category: 'JUNMAI GINJO',
                description: '地元産ひだほまれを55%精米した純米吟醸。穏やかな吟醸香とお米本来の旨みが調和した逸品です。飛騨の風土が育んだ米の個性を、丁寧な醸造技術で引き出しています。',
                awards: ['岐阜県酒造組合推奨酒', '地域ブランド認定'],
                specs: {
                    '精米歩合': '55%',
                    'アルコール度数': '15度',
                    '日本酒度': '+1',
                    '酸度': '1.4',
                    '使用米': 'ひだほまれ（岐阜県産）',
                    '使用酵母': '岐阜酵母',
                    '製造方法': '低温発酵'
                },
                tasting: {
                    '香り': '上品、花様',
                    '味わい': 'やや甘口',
                    'ボディ': 'ミディアム',
                    '余韻': '優しい'
                },
                pairing: '山菜料理、川魚の塩焼き、飛騨牛、地鶏料理。飛騨の郷土料理との相性は抜群です。',
                temperature: '冷やまたはぬる燗（12-40℃）。どちらの温度でも美味しく楽しめます。'
            },
            'junmai': {
                title: '純米酒 天領',
                category: 'JUNMAI-SHU',
                description: '天領酒造の定番純米酒。65%精米による米の旨みをしっかりと感じられる、飽きの来ない味わい。340年の伝統が生み出す、毎日の晩酌に最適な一本です。地元で最も愛され続けている銘柄です。',
                awards: ['340年の伝統を誇る定番酒', '地元愛飲者No.1'],
                specs: {
                    '精米歩合': '65%',
                    'アルコール度数': '15度',
                    '日本酒度': '+3',
                    '酸度': '1.6',
                    '使用米': 'ひだほまれ',
                    '使用酵母': '7号酵母',
                    '製造方法': '山廃仕込み'
                },
                tasting: {
                    '香り': '米様、穏やか',
                    '味わい': 'やや辛口',
                    'ボディ': 'フル',
                    '余韻': 'しっかり'
                },
                pairing: 'おでん、肉じゃが、さば味噌、豚の角煮。家庭料理全般に寄り添います。',
                temperature: '常温から熱燗（15-50℃）。燗にすることで米の旨みがより際立ちます。'
            },
            'seasonal': {
                title: '四季の酒 純米大吟醸',
                category: 'SEASONAL LIMITED',
                description: '季節限定の特別な純米大吟醸。50%精米による上品な味わいと、低温貯蔵により保たれるフレッシュな風味が特徴です。四季の移ろいとともに味わう、特別な時間を演出します。',
                awards: ['季節限定品', '数量限定醸造'],
                specs: {
                    '精米歩合': '50%',
                    'アルコール度数': '15度',
                    '日本酒度': '+2',
                    '酸度': '1.3',
                    '使用米': 'ひだほまれ',
                    '使用酵母': '季節酵母',
                    '保存方法': '要冷蔵（5℃以下）'
                },
                tasting: {
                    '香り': 'フレッシュ、季節感',
                    '味わい': '中口',
                    'ボディ': 'ミディアム',
                    '余韻': '季節の余韻'
                },
                pairing: '季節の食材、旬の料理。春は山菜、夏は鮎、秋は松茸、冬は鍋料理と。',
                temperature: 'よく冷やして（5-8℃）。フレッシュ感を最大限に楽しめます。'
            }
        };

        // モーダル機能
        function openProductModal(productId) {
            const product = productDetails[productId];
            if (!product) return;

            // モーダルの内容を設定
            document.getElementById('modalTitle').textContent = product.title;
            document.getElementById('modalCategory').textContent = product.category;
            document.getElementById('modalDescription').textContent = product.description;

            // 受賞歴
            const awardsDiv = document.getElementById('modalAwards');
            if (product.awards.length > 0) {
                awardsDiv.innerHTML = product.awards.map(award => 
                    `<span class="award-badge">${award}</span>`
                ).join('');
            } else {
                awardsDiv.innerHTML = '';
            }

            // スペック
            const specsDiv = document.getElementById('modalSpecs');
            specsDiv.innerHTML = Object.entries(product.specs).map(([label, value]) => 
                `<div class="modal-spec-item">
                    <div class="modal-spec-label">${label}</div>
                    <div class="modal-spec-value">${value}</div>
                </div>`
            ).join('');

            // テイスティングノート
            const tastingDiv = document.getElementById('tastingGrid');
            tastingDiv.innerHTML = Object.entries(product.tasting).map(([label, value]) => 
                `<div class="tasting-item">
                    <div class="label">${label}</div>
                    <div class="value">${value}</div>
                </div>`
            ).join('');

            // ペアリング
            document.getElementById('modalPairing').textContent = product.pairing;

            // 最適温度
            document.getElementById('modalTemperature').textContent = product.temperature;

            // モーダルを表示
            document.getElementById('productModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // モーダル外をクリックして閉じる
        document.getElementById('productModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProductModal();
            }
        });

        // ESCキーで閉じる
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeProductModal();
            }
        });

        // チャットボット知識ベース
        const knowledgeBase = {
            greeting: [
                "こんにちは", "hello", "はじめまして", "よろしく"
            ],
            products: {
                "純米大吟醸": {
                    keywords: ["純米大吟醸", "じゅんまいだいぎんじょう", "最高級", "ひだほまれ天領"],
                    response: "純米大吟醸「ひだほまれ天領」は、岐阜県産「ひだほまれ」を45%まで磨き上げた当蔵の最高峰です。華やかな香りとまろやかな味わいが特徴で、JAL国際線ビジネスクラスでも採用されました。特別な日の一杯におすすめです。"
                },
                "大吟醸": {
                    keywords: ["大吟醸", "だいぎんじょう", "吟", "山田錦"],
                    response: "大吟醸「吟」は、酒米の王様「山田錦」を40%まで磨いた逸品です。フルーティーな吟醸香と繊細な味わいのバランスが絶妙で、2011年にはJAL国内線ファーストクラスに採用されました。"
                },
                "特別純米": {
                    keywords: ["特別純米", "飛切り", "とびきり", "食中酒"],
                    response: "特別純米酒「飛切り」は、食中酒として最適な純米酒です。精米歩合60%で、すっきりとした飲み口が特徴。和食はもちろん、洋食にも合う万能な一本です。"
                },
                "純米吟醸": {
                    keywords: ["純米吟醸", "じゅんまいぎんじょう"],
                    response: "純米吟醸「ひだほまれ」は、地元産ひだほまれを55%精米した逸品です。穏やかな香りとお米の旨みが調和し、冷やでも燗でも楽しめます。"
                },
                "純米酒": {
                    keywords: ["純米酒", "じゅんまいしゅ", "定番"],
                    response: "純米酒「天領」は当蔵の定番商品です。精米歩合65%で、米の旨みをしっかりと感じられる飽きの来ない味わい。毎日の晩酌に最適です。"
                },
                "季節限定": {
                    keywords: ["季節", "限定", "四季", "しき"],
                    response: "「四季の酒 純米大吟醸」は季節限定の特別な純米大吟醸です。低温貯蔵でフレッシュな味わいを保ち、その季節にしか味わえない特別な一本です。"
                }
            },
            history: {
                keywords: ["歴史", "創業", "いつから", "伝統"],
                response: "天領酒造は1680年（延宝8年）に創業した、340年以上の歴史を持つ酒蔵です。創業者の日野屋佐兵衛は、近江国から飛騨に移り住み、この地の美しい自然と温かい人情に魅了されて酒造りを始めました。現在は8代目当主が伝統を守りながら、最高品質の日本酒を醸造しています。"
            },
            location: {
                keywords: ["場所", "どこ", "アクセス", "住所", "下呂"],
                response: "天領酒造は岐阜県下呂市萩原町萩原1289-1にございます。下呂温泉からもアクセスしやすく、飛騨の豊かな自然に囲まれた場所で酒造りを行っています。酒蔵見学も可能ですが、事前予約が必要です。"
            },
            water: {
                keywords: ["水", "みず", "伏流水", "軟水"],
                response: "当蔵では飛騨山脈の地下30メートルから汲み上げる天然水を使用しています。この水は超軟水で、日本酒造りに最適です。軟水仕込みにより、まろやかで優しい味わいの日本酒が生まれます。"
            },
            rice: {
                keywords: ["米", "こめ", "酒米", "ひだほまれ", "山田錦"],
                response: "天領酒造は全商品に酒造好適米を100%使用しており、県内使用率No.1を誇ります。地元産「ひだほまれ」や酒米の王様「山田錦」を使用し、自社精米により品質を管理しています。"
            },
            visit: {
                keywords: ["見学", "けんがく", "ツアー", "予約"],
                response: "酒蔵見学は事前予約制で承っております。実際の酒造りの工程をご覧いただき、試飲も可能です。見学時間は約60分で、営業時間は平日8:30-17:00、土曜8:30-12:00です。ご予約はお電話（0576-52-1515）でお願いします。"
            },
            recommendation: {
                keywords: ["おすすめ", "オススメ", "どれ", "初心者", "贈り物", "プレゼント"],
                response: "初めての方には「特別純米酒 飛切り」がおすすめです。飲みやすく、どんな料理にも合います。贈り物には「純米大吟醸 ひだほまれ天領」が人気です。JAL国際線でも採用された逸品で、特別な方への贈り物に最適です。"
            },
            pairing: {
                keywords: ["料理", "つまみ", "ペアリング", "合う"],
                response: "天領の日本酒は料理との相性も抜群です。純米大吟醸は刺身や寿司などの繊細な料理に、特別純米酒「飛切り」は焼き鳥や煮物など幅広い料理に合います。純米酒は熱燗にして、おでんや鍋料理と一緒にどうぞ。"
            },
            award: {
                keywords: ["賞", "受賞", "JAL", "評価"],
                response: "天領酒造は全国新酒鑑評会で1989年から2020年まで多数の優秀賞を受賞しています。また、JAL国際線ビジネスクラス（2005-2009年）、国内線ファーストクラス（2011-2012年）に採用され、パリ国際航空ショーでVIP向け贈答品にも選ばれました。"
            },
            temperature: {
                keywords: ["温度", "冷や", "燗", "常温", "飲み方"],
                response: "銘柄により最適な温度があります。純米大吟醸は5-10℃の冷やがおすすめ。純米吟醸は10-15℃または40-45℃のぬる燗で。純米酒は常温から50℃の熱燗まで幅広く楽しめます。"
            },
            buy: {
                keywords: ["買う", "購入", "通販", "オンライン", "どこで"],
                response: "天領酒造の商品は、公式オンラインストア、全国の酒販店、百貨店でお求めいただけます。また、蔵元直売所でも販売しております。オンラインストアでは全国配送も承っております。"
            }
        };

        // 音声認識の設定
        let recognition = null;
        let isRecording = false;

        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.lang = 'ja-JP';
            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('chatInput').value = transcript;
                sendMessage();
            };

            recognition.onerror = function(event) {
                console.error('音声認識エラー:', event.error);
                stopRecording();
            };

            recognition.onend = function() {
                stopRecording();
            };
        }

        // チャットボットの表示/非表示
        function toggleChatbot() {
            const chatbot = document.getElementById('chatbot');
            chatbot.classList.toggle('active');
            
            if (chatbot.classList.contains('active')) {
                document.getElementById('chatInput').focus();
            }
        }

        // メッセージ送信（GPT API対応版）
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, 'user');
                input.value = '';
                
                // タイピングインジケーター表示
                showTypingIndicator();
                
                try {
                    // GPT APIまたはローカル応答を取得
                    let response;
                    if (chatbot) {
                        response = await chatbot.sendMessage(message);
                    } else {
                        // chatbotが初期化されていない場合はローカル応答
                        response = generateResponse(message);
                    }
                    
                    hideTypingIndicator();
                    addMessage(response, 'bot');
                } catch (error) {
                    console.error('メッセージ送信エラー:', error);
                    hideTypingIndicator();
                    addMessage('申し訳ございません。一時的にエラーが発生しました。しばらくしてからお試しください。', 'bot');
                }
            }
        }

        // クイック返信
        function sendQuickReply(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }

        // エンターキーでの送信
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // メッセージを追加
        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = text;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // タイピングインジケーター
        function showTypingIndicator() {
            document.getElementById('typingIndicator').classList.add('active');
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').classList.remove('active');
        }

        // 音声入力の切り替え
        function toggleVoiceInput() {
            if (!recognition) {
                alert('お使いのブラウザは音声認識に対応していません。');
                return;
            }

            if (isRecording) {
                stopRecording();
            } else {
                startRecording();
            }
        }

        function startRecording() {
            recognition.start();
            isRecording = true;
            document.getElementById('voiceBtn').classList.add('recording');
        }

        function stopRecording() {
            if (recognition && isRecording) {
                recognition.stop();
            }
            isRecording = false;
            document.getElementById('voiceBtn').classList.remove('recording');
        }

        // 応答生成
        function generateResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // 挨拶
            if (knowledgeBase.greeting.some(g => message.includes(g))) {
                return "こんにちは！天領酒造へようこそ。どのようなご用件でしょうか？銘柄のご案内、酒蔵見学、歴史など、何でもお尋ねください。";
            }
            
            // 商品について
            for (const [key, product] of Object.entries(knowledgeBase.products)) {
                if (product.keywords.some(k => message.includes(k))) {
                    return product.response;
                }
            }
            
            // 歴史
            if (knowledgeBase.history.keywords.some(k => message.includes(k))) {
                return knowledgeBase.history.response;
            }
            
            // 場所
            if (knowledgeBase.location.keywords.some(k => message.includes(k))) {
                return knowledgeBase.location.response;
            }
            
            // 水
            if (knowledgeBase.water.keywords.some(k => message.includes(k))) {
                return knowledgeBase.water.response;
            }
            
            // 米
            if (knowledgeBase.rice.keywords.some(k => message.includes(k))) {
                return knowledgeBase.rice.response;
            }
            
            // 見学
            if (knowledgeBase.visit.keywords.some(k => message.includes(k))) {
                return knowledgeBase.visit.response;
            }
            
            // おすすめ
            if (knowledgeBase.recommendation.keywords.some(k => message.includes(k))) {
                return knowledgeBase.recommendation.response;
            }
            
            // ペアリング
            if (knowledgeBase.pairing.keywords.some(k => message.includes(k))) {
                return knowledgeBase.pairing.response;
            }
            
            // 受賞
            if (knowledgeBase.award.keywords.some(k => message.includes(k))) {
                return knowledgeBase.award.response;
            }
            
            // 温度
            if (knowledgeBase.temperature.keywords.some(k => message.includes(k))) {
                return knowledgeBase.temperature.response;
            }
            
            // 購入
            if (knowledgeBase.buy.keywords.some(k => message.includes(k))) {
                return knowledgeBase.buy.response;
            }
            
            // デフォルト応答
            const defaultResponses = [
                "申し訳ございません。もう少し詳しくお聞かせいただけますか？例えば「純米大吟醸について」「酒蔵見学について」などとお尋ねください。",
                "ご質問ありがとうございます。天領酒造の銘柄、歴史、酒蔵見学などについて詳しくご案内できます。どちらについてお知りになりたいですか？",
                "お問い合わせの内容をもう少し具体的にお聞かせください。おすすめの銘柄、ペアリング、購入方法など、様々な情報をご提供できます。"
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        // スムーズスクロール
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ヘッダーのスクロール処理
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > 100) {
                if (currentScroll > lastScroll) {
                    header.style.transform = 'translateY(-100%)';
                } else {
                    header.style.transform = 'translateY(0)';
                }
            }
            
            lastScroll = currentScroll;
        });
    </script>
</body>
</html>